# Documentation for `app.py`

## Overview
`app.py` is the main entry point for the Streamlit web application. It handles the User Interface (UI), session state management, and coordinates interactions between the user, the AI logic, and the automata engine.

## Key Responsibilities

### 1. Application Configuration
-   **Page Setup**: Configures the page title, icon, and layout using `st.set_page_config`.
-   **Dependencies**: Imports core libraries (`streamlit`, `pandas`) and local modules (`logic`, `automata_logic`).

### 2. Security & API Key Management
-   **Priority System**: Determines which Google API Key to use based on the following order:
    1.  `st.secrets["GOOGLE_API_KEY"]` (Best for Cloud Deployment)
    2.  `os.environ["GOOGLE_API_KEY"]` (Best for Local Development)
    3.  User Input (Sidebar fallback)
-   **UI Logic**: If a system-level key is found, the manual input field is **hidden** from the user interface to securely manage credentials.

### 3. Session State Management
-   Initializes persistent objects that survive page reruns:
    -   `processor`: An instance of `LanguageProcessor` (from `logic.py`).
    -   `history`: Stores interaction history.
    -   `automata_result`: Stores generated DFA/NFA objects.
    -   `automata_steps`: Stores minimization logs.

### 4. Tab Structure
The application is divided into two main tabs:

#### Tab 1: Define & Test Language
-   **Language Definition**: Uses `st.text_area` for natural language descriptions.
-   **AI Analysis**: Calls `processor.set_language()` to analyze the description via Gemini AI.
-   **Testing**:
    -   **Single String**: Immediate feedback ("Accepted"/"Rejected").
    -   **Batch Test**: Supports Manual CSV entry, File Upload, or Hardcoded samples.

#### Tab 2: Automata Studio
-   **Conversion Logic**: Handles NFA $\leftrightarrow$ DFA $\leftrightarrow$ Regex conversions.
-   **Context-Aware Examples**:
    -   Dynamically loads different example datasets into the "Transition Table Editor" based on the user's intent.
    -   *Example*: Loads an 8-state DFA for "Minimized DFA" tasks vs. a 2-state DFA for "Regex" tasks.
-   **Visualization**: Uses `graphviz_chart` to render the automata diagrams generated by `automata_logic.py`.
-   **Chained Operations**: Allows users to take the result of a conversion (e.g., NFA -> DFA) and immediately minimize it.

## Dependencies
-   `streamlit`
-   `pandas`
-   `logic.py` (LanguageProcessor)
-   `automata_logic.py` (AutomataHandler)
-   `automata.fa.dfa` (DFA class)
