# Documentation for `automata_logic.py`

## Overview
`automata_logic.py` serves as the mathematical engine of the application. It implements deterministic algorithms for Finite Automata (FA) operations, prioritizing educational clarity over standard library optimizations.

## Key Classes & Methods

### `AutomataHandler`
A static utility class that encapsulates all automata operations.

#### 1. NFA to DFA Conversion
-   **Method**: `nfa_to_dfa(nfa_obj)`
-   **Algorithm**: **Manual Subset Construction (Powerset Construction)**.
-   **Why Manual?**: Standard libraries often rename states to arbitrary integers (0, 1, 2...). This implementation manually computes the epsilon-closure and tracks state sets (e.g., `{q0, q1}`) to explicitly show students how the DFA states are derived from the NFA.
-   **Logic**:
    -   Computes epsilon-closure of the start state.
    -   Iteratively discovers new states reachable by each symbol.
    -   Maps `frozenset` of NFA states to DFA states.

#### 2. DFA Minimization
-   **Method**: `minimize_dfa_with_steps(dfa_obj)`
-   **Algorithm**: **Moore's Algorithm** ($O(n^2)$).
-   **Features**:
    -   **Step Tracking**: Returns a log of equivalence partitions (0-equivalence, 1-equivalence, etc.) for display in the UI.
    -   **Partial DFA Support**: Constructs the final DFA using `allow_partial=True`. This handles cases where the minimized DFA has missing transitions (implicit dead states) without throwing validation errors.

#### 3. Regex Operations
-   **Method**: `regex_to_nfa(regex_str)`: Wrapper around `automata-lib`.
-   **Method**: `regex_to_dfa(regex_str)`: Chains `regex_to_nfa` $\to$ `nfa_to_dfa` to ensure the final result has readable subset states.
-   **Method**: `dfa_to_regex(dfa_obj)`: Uses State Elimination (GNFA) to convert a DFA back to a Regular Expression.

#### 4. Visualization
-   **Method**: `get_graphviz_source(automaton)`
-   **Technology**: Generates raw **Graphviz DOT** code using the `graphviz` python library.
-   **Sanitization**:
    -   The state names generated by the manual algorithms can be complex objects (e.g., `frozenset({'q0', 'q1'})`).
    -   This method includes a `safe_label` helper that cleans these strings into neat set notation (e.g., `{q0, q1}`) for rendering.

## Dependencies
-   `automata-lib`: For base NFA/DFA/GNFA objects.
-   `graphviz`: For diagram generation.
-   `pandas`: For generating transition tables.
